â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    SOCIAL LOGIN SETUP GUIDE
                        (Google & Facebook)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sekarang sistem support login dengan Google dan Facebook!

ğŸ¯ Fitur:
   âœ“ Login dengan Google
   âœ“ Daftar dengan Google
   âœ“ Login dengan Facebook  
   âœ“ Daftar dengan Facebook
   âœ“ Auto-create akun jika user baru
   âœ“ Auto-download profile picture
   âœ“ CSRF protection dengan state token
   âœ“ Email otomatis terverifikasi

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: UPDATE DATABASE SCHEMA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Jalankan migration untuk add OAuth columns:

   Cara 1: Via Browser (Termudah)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka: http://localhost/VSB_project/service/oauth/migrate_oauth.php
   2. Tunggu hingga selesai
   3. Lihat notifikasi "âœ… OAuth Support Added Successfully!"

   Cara 2: Via MySQL CLI
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka MySQL prompt
   2. Select database: USE vsb_knowledge_battle;
   3. Jalankan queries:
      
      ALTER TABLE users ADD COLUMN oauth_id VARCHAR(255) UNIQUE DEFAULT NULL;
      ALTER TABLE users ADD COLUMN oauth_provider VARCHAR(50) DEFAULT NULL;
      ALTER TABLE users ADD COLUMN is_verified TINYINT(1) DEFAULT 0;
      ALTER TABLE users ADD COLUMN profile_picture VARCHAR(255) DEFAULT NULL;

   Cara 3: Via PhpMyAdmin
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka PhpMyAdmin
   2. Klik database: vsb_knowledge_battle
   3. Klik tabel: users
   4. Klik "Structure"
   5. Klik "Add columns" di bawah
   6. Tambahkan 4 columns:
      - oauth_id (VARCHAR 255, UNIQUE)
      - oauth_provider (VARCHAR 50)
      - is_verified (TINYINT 1)
      - profile_picture (VARCHAR 255)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 2: SETUP GOOGLE OAUTH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A. Create Google Project & Get Credentials:

   1. Buka: https://console.cloud.google.com
   
   2. Create Project:
      - Click "Select a project" (top left)
      - Click "New Project"
      - Name: "Knowledge Battle"
      - Create
      
   3. Enable Google+ API:
      - Search: "Google+ API" di search bar
      - Click hasil pertama
      - Click "Enable"
      
   4. Create OAuth Credentials:
      - Go to: APIs & Services > Credentials
      - Click "Create Credentials" > "OAuth client ID"
      - Pilih: "Web application"
      - Name: "Knowledge Battle Web"
      
      - Add authorized redirect URIs:
        * For localhost: http://localhost/VSB_project/service/oauth/google_callback.php
        * For production: https://yourdomain.com/VSB_project/service/oauth/google_callback.php
      
      - Click "Create"
      - Copy Client ID dan Client Secret

B. Configure Application:

   Option 1: Gunakan .env File (RECOMMENDED)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka file .env di project root
   2. Tambahkan:
      
      GOOGLE_CLIENT_ID=your_client_id_here
      GOOGLE_CLIENT_SECRET=your_client_secret_here
   
   3. Save file
   
   Option 2: Edit config.oauth.php Langsung
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka: /service/oauth/config.oauth.php
   2. Cari baris:
      
      'client_id' => getenv('GOOGLE_CLIENT_ID') ?: 'YOUR_GOOGLE_CLIENT_ID',
      
   3. Ganti dengan:
      
      'client_id' => 'your_actual_client_id',
      'client_secret' => 'your_actual_client_secret',

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 3: SETUP FACEBOOK OAUTH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

A. Create Facebook App & Get Credentials:

   1. Buka: https://developers.facebook.com
   
   2. Create App:
      - Click "My Apps" > "Create App"
      - App Name: "Knowledge Battle"
      - App Purpose: "Consumer"
      - Create App
   
   3. Add Facebook Login:
      - Find "Facebook Login" in Products
      - Click "Set Up"
      - Choose "Web"
      
   4. Configure Redirect URIs:
      - Go to: Settings > Basic
      - Copy "App ID" dan "App Secret" (untuk nanti)
      
      - Go to: Products > Facebook Login > Settings
      - Valid OAuth Redirect URIs:
        * For localhost: http://localhost/VSB_project/service/oauth/facebook_callback.php
        * For production: https://yourdomain.com/VSB_project/service/oauth/facebook_callback.php
      
      - Save Changes

B. Configure Application:

   Option 1: Gunakan .env File (RECOMMENDED)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka file .env di project root
   2. Tambahkan:
      
      FACEBOOK_APP_ID=your_app_id_here
      FACEBOOK_APP_SECRET=your_app_secret_here
   
   3. Save file
   
   Option 2: Edit config.oauth.php Langsung
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1. Buka: /service/oauth/config.oauth.php
   2. Cari baris:
      
      'app_id' => getenv('FACEBOOK_APP_ID') ?: 'YOUR_FACEBOOK_APP_ID',
      
   3. Ganti dengan:
      
      'app_id' => 'your_actual_app_id',
      'app_secret' => 'your_actual_app_secret',

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 4: TEST SOCIAL LOGIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Buka form login atau register:
   http://localhost/VSB_project/View/login_register/form_login.php
   
2. Lihat tombol baru: "Google" dan "Facebook"

3. Click "Google" atau "Facebook"

4. Login dengan akun Google/Facebook Anda

5. Sistem akan:
   âœ“ Verify email via Google/Facebook
   âœ“ Auto-create akun jika user baru
   âœ“ Download profile picture
   âœ“ Redirect ke halaman utama

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE STRUKTUR
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/service/oauth/
  â”œâ”€â”€ config.oauth.php          â† Konfigurasi OAuth (credentials)
  â”œâ”€â”€ google_login.php           â† Redirect ke Google
  â”œâ”€â”€ google_callback.php        â† Handle response dari Google
  â”œâ”€â”€ facebook_login.php         â† Redirect ke Facebook
  â”œâ”€â”€ facebook_callback.php      â† Handle response dari Facebook
  â””â”€â”€ migrate_oauth.php          â† Database migration

/View/login_register/
  â”œâ”€â”€ form_login.php             â† Social buttons added
  â””â”€â”€ form_register.php          â† Social buttons added

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SECURITY NOTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ CSRF Protection: Menggunakan state token
âœ“ Secure Redirect: Hanya redirect ke registered URIs
âœ“ Email Verification: Otomatis verified via provider
âœ“ Password: Random generated untuk OAuth users (tidak digunakan)
âœ“ Credentials: Store di .env atau environment variables
âœ“ Profile Pictures: Download ke /uploads/profile/

âš ï¸ Jangan:
   - Commit credentials ke git (.env di .gitignore)
   - Share client secret di public code
   - Use hardcoded credentials di production

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TROUBLESHOOTING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âŒ "Invalid state token"
   â†’ Cookies atau session tidak bekerja
   â†’ Check: Session folder permissions
   â†’ Check: Browser cookies enabled
   
âŒ "Could not get email from Google/Facebook"
   â†’ Email scope tidak included
   â†’ Check: Google/Facebook permissions
   â†’ Solution: Revoke app access dan login ulang
   
âŒ "No authorization code received"
   â†’ Redirect URI tidak match
   â†’ Check: config.oauth.php base URL
   â†’ Check: Google/Facebook app settings
   
âŒ Profile picture tidak download
   â†’ CURL not enabled
   â†’ Check: php.ini extension=php_curl.dll
   â†’ Check: /uploads/profile/ folder permissions
   
âŒ "Failed to create account"
   â†’ Database error
   â†’ Check: users table has OAuth columns
   â†’ Run migrate_oauth.php
   â†’ Check: Database permissions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NEXT STEPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. âœ… Update database (Step 1)
2. âœ… Setup Google OAuth (Step 2)
3. âœ… Setup Facebook OAuth (Step 3)
4. âœ… Test Social Login (Step 4)
5. âœ… Update .env with credentials
6. âœ… Test dengan account Google/Facebook Anda

Enjoy! ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
